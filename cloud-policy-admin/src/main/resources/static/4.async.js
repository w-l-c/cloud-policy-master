(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"3gs7":function(e,t,a){e.exports={tableList:"antd-pro-pages-sys-auth-menu-manage-route-index-tableList",tableListOperator:"antd-pro-pages-sys-auth-menu-manage-route-index-tableListOperator",tableListForm:"antd-pro-pages-sys-auth-menu-manage-route-index-tableListForm",submitButtons:"antd-pro-pages-sys-auth-menu-manage-route-index-submitButtons"}},V2i6:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var r=l(a("kLXV"));a("IzEo");var o=l(a("bx4M"));a("+L6B");var i=l(a("2/Rp"));a("P2fV");var u,d,s,p,c=l(a("NJEC")),f=l(a("gWZ8")),m=l(a("2Taf")),h=l(a("vZ4D")),y=l(a("l4Ni")),b=l(a("ujKo")),v=l(a("MhPg")),g=n(a("q1tI")),C=l(a("17x9")),S=a("MuoO"),I=l(a("BkRI")),k=l(a("YQYO")),T=a("+n12"),w=l(a("zHco")),x=l(a("knc2")),E=l(a("hHWH")),M=l(a("3gs7")),R=(u=(0,S.connect)(function(e){var t=e.user,a=e.loading,l=e.menumanage,n=e.dictionary;return{currentUser:t.currentUser,loading:a.models.menumanage,menumanage:l,dictionary:n}}),u((p=s=function(e){function t(e){var a;return(0,m.default)(this,t),a=(0,y.default)(this,(0,b.default)(t).call(this,e)),a.updateFormItems=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"create",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(0,I.default)(a.pageConfig.detailFormItems),r=[].concat((0,f.default)(n.selectFormItem),(0,f.default)(n[e]),(0,f.default)(n.textArea)),o=(0,T.formItemAddInitValue)(r,l);"update"===t&&(o[0].colSpan=0),a.setState({detailFormItems:o,currentItem:l})},a.showModalVisibel=function(e,t){var l=t.menutype;a.updateFormItems(l,e,t),a.changeModalVisibel(!0),a.setState({showModalType:e})},a.hideModalVisibel=function(){a.changeModalVisibel(!1),a.setState({detailFormItems:[],currentItem:{}})},a.changeModalVisibel=function(e){a.props.dispatch({type:"menumanage/modalVisible",payload:{modalVisible:e}})},a.extraTableColumnRender=function(){var e=[{title:"\u64cd\u4f5c",render:function(e,t){if(0!==t.parentid&&3!==t.menutype)return g.default.createElement("div",null,g.default.createElement("a",{onClick:function(){a.showModalVisibel("update",t)}},"\u7f16\u8f91"),"\xa0",g.default.createElement(c.default,{title:"\u786e\u5b9a\u5220\u9664\u5417\uff1f",onConfirm:function(){a.deleteTableRowHandle(t.id)}},g.default.createElement("a",null,"\u5220\u9664")))}}];return e},a.modalOkHandle=function(){a.modalForm.validateFieldsAndScroll(function(e,t){if(!e){var l=a.state.showModalType,n=(0,T.formaterObjectValue)(t);"create"===l?a.props.dispatch({type:"menumanage/add",payload:n}):"update"===l&&a.props.dispatch({type:"menumanage/update",payload:n})}})},a.deleteTableRowHandle=function(e){a.props.dispatch({type:"menumanage/remove",payload:{id:e}})},a.renderTable=function(){var e=a.props,t=e.menumanage,l=e.loading,n=a.pageConfig.tableColumns,r=[].concat((0,f.default)(n),(0,f.default)(a.extraTableColumnRender())),o=t.data.list,i=void 0===o?[]:o,u={loading:l,dataSource:i,columns:r};return g.default.createElement(k.default,u)},a.pageConfig=(0,x.default)(e.form),a.state={showModalType:"",detailFormItems:[],currentItem:{}},a}return(0,v.default)(t,e),(0,h.default)(t,[{key:"getChildContext",value:function(){return{updateFormItems:this.updateFormItems}}},{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"menumanage/fetch"})}},{key:"render",value:function(){var e=this,t=this.state,a=t.detailFormItems,l=t.currentItem,n=this.props.menumanage,u=n.modalVisible,d=n.confirmLoading;return g.default.createElement(w.default,null,g.default.createElement(o.default,{bordered:!1},g.default.createElement("div",{className:M.default.tableList},g.default.createElement("div",{className:M.default.tableListForm},g.default.createElement("div",{className:M.default.tableListOperator},g.default.createElement(i.default,{icon:"plus",type:"primary",onClick:function(){return e.showModalVisibel("create",{})}},"\u65b0\u5efa")),this.renderTable()))),g.default.createElement(r.default,{destroyOnClose:!0,visible:u,confirmLoading:d,onCancel:function(){return e.hideModalVisibel()},onOk:function(){e.modalOkHandle()}},g.default.createElement(E.default,{ref:function(t){e.modalForm=t},currentItem:l,formItems:a})))}}]),t}(g.PureComponent),s.childContextTypes={updateFormItems:C.default.func},d=p))||d),q=R;t.default=q},hHWH:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var r=l(a("bx4M"));a("14J3");var o=l(a("BMrR"));a("jCWc");var i=l(a("kPKH")),u=l(a("2Taf")),d=l(a("vZ4D")),s=l(a("l4Ni")),p=l(a("ujKo")),c=l(a("MhPg"));a("y8nQ");var f,m,h,y,b=l(a("Vl3Y")),v=n(a("q1tI")),g=l(a("17x9")),C=l(a("9N//")),S=(f=b.default.create(),f((y=h=function(e){function t(){var e,a;(0,u.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,s.default)(this,(e=(0,p.default)(t)).call.apply(e,[this].concat(n))),a.state={selectMenuTypeValue:a.props.currentItem.menutype||1},a.selectMenuType=function(e){a.context.updateFormItems(e),a.setState({selectMenuTypeValue:e}),a.props.form.resetFields()},a.renderFormItem=function(){var e=a.props,t=e.formItems,l=e.form,n=a.state.selectMenuTypeValue;return t.map(function(e){"CSelectDynamicTree"===e.formType&&Object.assign(e.props,{selectMenuTypeValue:n}),"menutype"===e.key&&(e.props.onChange=a.selectMenuType);var t=(0,C.default)(e,l);return v.default.createElement(i.default,{lg:0===e.colSpan?0:e.colSpan||8,md:0===e.colSpan?0:12,sm:0===e.colSpan?0:24,key:e.key},t)})},a}return(0,c.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return v.default.createElement(r.default,{bordered:!1,loading:!1},v.default.createElement(b.default,null,v.default.createElement(o.default,{gutter:24},this.renderFormItem())))}}]),t}(v.PureComponent),h.contextTypes={updateFormItems:g.default.func},m=y))||m),I=S;t.default=I},knc2:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("5Dmo");var n=l(a("3S7+")),r=l(a("p0pE"));a("Pwec");var o=l(a("CtXQ"));a("+BJd");var i=l(a("mr32")),u=l(a("q1tI")),d=l(a("xNuS")),s={labelCol:{span:6},wrapperCol:{span:18}},p=function(){return{name:"\u83dc\u5355\u7ba1\u7406",path:"permission/menumanage",tableColumns:[{title:"\u83dc\u5355ID",dataIndex:"id"},{title:"\u83dc\u5355\u540d\u79f0",dataIndex:"menuname"},{title:"\u7c7b\u578b",dataIndex:"menutype",render:function(e){return 1===e?u.default.createElement(i.default,{color:"#f50"},"\u76ee\u5f55"):2===e?u.default.createElement(i.default,{color:"#2db7f5"},"\u83dc\u5355"):4===e?u.default.createElement(i.default,{color:"#108ee9"},"\u6309\u94ae"):void 0}},{title:"\u83dc\u5355\u8def\u5f84",dataIndex:"router"},{title:"\u6388\u6743\u6807\u8bc6",dataIndex:"permission",render:function(e){return u.default.createElement(d.default,{length:100,tooltip:!0},e)}},{title:"\u6392\u5e8f",dataIndex:"menuorder"},{title:"\u4fee\u6539\u65f6\u95f4",dataIndex:"updatetime"},{title:"\u56fe\u6807",dataIndex:"icon",render:function(e){return""!==e?u.default.createElement(o.default,{type:e,style:{fontSize:16,color:"#08c"}}):null}}],detailFormItems:{selectFormItem:[{formType:"CSelect",isRequired:!0,initialValue:1,key:"menutype",label:"\u7c7b\u578b",colSpan:24,props:{},formitemprops:(0,r.default)({},s),selectOptions:[{key:1,value:"\u76ee\u5f55"},{key:2,value:"\u83dc\u5355"},{key:4,value:"\u6309\u94ae"}]},{formType:"CSelect",isRequired:!0,initialValue:1,key:"status",label:"\u72b6\u6001",colSpan:24,props:{disabled:!1,getPopupContainer:function(){return document.querySelector(".ant-modal-wrap")}},formitemprops:(0,r.default)({},s),selectOptions:[{key:1,value:"\u901a\u8fc7"},{key:2,value:"\u62d2\u7edd"}]}],1:[{formType:"CInput",isRequired:!1,key:"id",label:"id",colSpan:0,props:{disabled:!1},formitemprops:(0,r.default)({},s)},{formType:"CInput",isRequired:!0,key:"menuname",label:"\u76ee\u5f55\u540d\u79f0",colSpan:24,props:{disabled:!1},formitemprops:(0,r.default)({},s)},{formType:"CSelectDynamicTree",isRequired:!0,key:"parentid",label:"\u7236\u7ea7\u76ee\u5f55",colSpan:24,dictionaryKey:"menuStructure",fetchUrl:"/sys/menu/dic",props:{disabled:!1,placeholder:"\u8bf7\u9009\u62e9\u4e0a\u7ea7\u76ee\u5f55",getPopupContainer:function(){return document.querySelector(".ant-modal-wrap ")}},formitemprops:(0,r.default)({},s)},{formType:"CInput",isRequired:!0,key:"router",label:"\u8def\u7531",colSpan:24,props:{disabled:!1},formitemprops:(0,r.default)({},s)},{formType:"CInput",isRequired:!0,key:"icon",label:"\u56fe\u6807",colSpan:24,props:{disabled:!1},formitemprops:(0,r.default)({},s)},{formType:"CInputNumber",isRequired:!1,key:"menuorder",label:"\u6392\u5e8f",colSpan:24,props:{disabled:!1},formitemprops:(0,r.default)({},s)}],2:[{formType:"CInput",isRequired:!1,key:"id",label:"id",colSpan:0,props:{disabled:!1},formitemprops:(0,r.default)({},s)},{formType:"CInput",isRequired:!0,key:"menuname",label:"\u83dc\u5355\u540d\u79f0",colSpan:24,props:{disabled:!1},formitemprops:(0,r.default)({},s)},{formType:"CSelectDynamicTree",isRequired:!0,key:"parentid",label:"\u7236\u7ea7\u76ee\u5f55",colSpan:24,dictionaryKey:"menuStructure",fetchUrl:"/sys/menu/dic",props:{disabled:!1,placeholder:"\u8bf7\u9009\u62e9\u4e0a\u7ea7\u76ee\u5f55"},formitemprops:(0,r.default)({},s)},{formType:"CInput",isRequired:!0,key:"router",label:"\u8def\u7531",colSpan:24,props:{disabled:!1},formitemprops:(0,r.default)({},s)},{formType:"CInput",isRequired:!0,key:"permission",label:"\u6388\u6743\u6807\u8bc6",colSpan:24,props:{disabled:!1},formitemprops:(0,r.default)({},s)},{formType:"CInputNumber",isRequired:!1,key:"menuorder",label:"\u6392\u5e8f",colSpan:24,props:{disabled:!1},formitemprops:(0,r.default)({},s)},{formType:"CInput",isRequired:!1,key:"icon",label:"\u56fe\u6807",colSpan:24,props:{disabled:!1},formitemprops:(0,r.default)({},s,{label:u.default.createElement("span",null,"\u56fe\u6807 \xa0",u.default.createElement(n.default,{key:"tipIcon",title:"\u83dc\u5355\u9009\u62e9\u9876\u7ea7\u76ee\u5f55\u65f6,\u8bf7\u8f93\u5165Icon"},u.default.createElement(o.default,{type:"question-circle-o"})))})}],4:[{formType:"CInput",isRequired:!1,key:"id",label:"id",colSpan:0,props:{disabled:!1},formitemprops:(0,r.default)({},s)},{formType:"CInput",isRequired:!0,key:"menuname",label:"\u6309\u94ae\u540d\u79f0",colSpan:24,props:{disabled:!1},formitemprops:(0,r.default)({},s)},{formType:"CSelectDynamicTree",isRequired:!0,key:"parentid",label:"\u7236\u7ea7\u83dc\u5355",colSpan:24,dictionaryKey:"menuStructure",fetchUrl:"/sys/menu/dic",props:{disabled:!1,placeholder:"\u8bf7\u9009\u62e9\u4e0a\u7ea7\u76ee\u5f55"},formitemprops:(0,r.default)({},s)},{formType:"CInput",isRequired:!0,key:"permission",label:"\u6388\u6743\u6807\u8bc6",colSpan:24,props:{disabled:!1},formitemprops:(0,r.default)({},s)},{formType:"CInput",isRequired:!0,key:"router",label:"\u663e\u793a\u6807\u8bc6",colSpan:24,props:{disabled:!1},formitemprops:(0,r.default)({},s)}],textArea:[{formType:"CTextArea",isRequired:!1,key:"remark",label:"\u5907\u6ce8",colSpan:24,props:{disabled:!1,autosize:{minRows:5,maxRows:10}},formitemprops:(0,r.default)({},s)}]}}};t.default=p},mcBY:function(e,t,a){e.exports={ellipsis:"antd-pro-components-ellipsis-index-ellipsis",lines:"antd-pro-components-ellipsis-index-lines",shadow:"antd-pro-components-ellipsis-index-shadow",lineClamp:"antd-pro-components-ellipsis-index-lineClamp"}},xNuS:function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.cutStrByFullLength=t.getStrFullLength=void 0;var r=n(a("jehZ")),o=n(a("eHn4")),i=n(a("2Taf")),u=n(a("vZ4D")),d=n(a("l4Ni")),s=n(a("ujKo")),p=n(a("MhPg")),c=n(a("Y/ft"));a("5Dmo");var f=n(a("3S7+")),m=n(a("p0pE")),h=l(a("q1tI")),y=n(a("TSYQ")),b=n(a("mcBY")),v=void 0!==document.body.style.webkitLineClamp,g={overflowWrap:"break-word",wordWrap:"break-word"},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split("").reduce(function(e,t){var a=t.charCodeAt(0);return a>=0&&a<=128?e+1:e+2},0)};t.getStrFullLength=C;var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=0;return e.split("").reduce(function(e,l){var n=l.charCodeAt(0);return a+=n>=0&&n<=128?1:2,a<=t?e+l:e},"")};t.cutStrByFullLength=S;var I=function(e){var t=e.tooltip,a=e.overlayStyle,l=e.title,n=e.children;if(t){var r=!0===t?{overlayStyle:a,title:l}:(0,m.default)({},t,{overlayStyle:a,title:l});return h.default.createElement(f.default,r,n)}return n},k=function(e){var t=e.text,a=e.length,l=e.tooltip,n=e.fullWidthRecognition,r=(0,c.default)(e,["text","length","tooltip","fullWidthRecognition"]);if("string"!==typeof t)throw new Error("Ellipsis children must be string.");var o=n?C(t):t.length;if(o<=a||a<0)return h.default.createElement("span",r,t);var i,u="...";i=a-u.length<=0?"":n?S(t,a):t.slice(0,a);var d=l?{}:(0,m.default)({},r);return I({tooltip:l,overlayStyle:g,title:t,children:h.default.createElement("span",d,i,u)})},T=function(e){function t(){var e,a;(0,i.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,d.default)(this,(e=(0,s.default)(t)).call.apply(e,[this].concat(n))),a.state={text:"",targetCount:0},a.computeLine=function(){var e=a.props.lines;if(e&&!v){var t=a.shadowChildren.innerText||a.shadowChildren.textContent,l=parseInt(getComputedStyle(a.root).lineHeight,10),n=e*l;a.content.style.height="".concat(n,"px");var r=a.shadowChildren.offsetHeight,o=a.shadow.firstChild;if(r<=n)return void a.setState({text:t,targetCount:t.length});var i=t.length,u=Math.ceil(i/2),d=a.bisection(n,u,0,i,t,o);a.setState({text:t,targetCount:d})}},a.bisection=function(e,t,l,n,r,o){var i="...",u=t,d=n,s=l;o.innerHTML=r.substring(0,u)+i;var p=o.offsetHeight;return p<=e?(o.innerHTML=r.substring(0,u+1)+i,p=o.offsetHeight,p>e||u===s?u:(s=u,u=d-s===1?1+s:Math.floor((d-s)/2)+s,a.bisection(e,u,s,d,r,o))):u-1<0?u:(o.innerHTML=r.substring(0,u-1)+i,p=o.offsetHeight,p<=e?u-1:(d=u,u=Math.floor((d-s)/2)+s,a.bisection(e,u,s,d,r,o)))},a.handleRoot=function(e){a.root=e},a.handleContent=function(e){a.content=e},a.handleNode=function(e){a.node=e},a.handleShadow=function(e){a.shadow=e},a.handleShadowChildren=function(e){a.shadowChildren=e},a}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.node&&this.computeLine()}},{key:"componentDidUpdate",value:function(e){var t=this.props.lines;t!==e.lines&&this.computeLine()}},{key:"render",value:function(){var e,t=this.state,a=t.text,l=t.targetCount,n=this.props,i=n.children,u=n.lines,d=n.length,s=n.className,p=n.tooltip,f=n.fullWidthRecognition,m=(0,c.default)(n,["children","lines","length","className","tooltip","fullWidthRecognition"]),C=(0,y.default)(b.default.ellipsis,s,(e={},(0,o.default)(e,b.default.lines,u&&!v),(0,o.default)(e,b.default.lineClamp,u&&v),e));if(!u&&!d)return h.default.createElement("span",(0,r.default)({className:C},m),i);if(!u)return h.default.createElement(k,(0,r.default)({className:C,length:d,text:i||"",tooltip:p,fullWidthRecognition:f},m));var S="antd-pro-ellipsis-".concat("".concat((new Date).getTime()).concat(Math.floor(100*Math.random())));if(v){var T="#".concat(S,"{-webkit-line-clamp:").concat(u,";-webkit-box-orient: vertical;}"),w=h.default.createElement("div",(0,r.default)({id:S,className:C},m),h.default.createElement("style",null,T),i);return I({tooltip:p,overlayStyle:g,title:i,children:w})}var x=h.default.createElement("span",{ref:this.handleNode},l>0&&a.substring(0,l),l>0&&l<a.length&&"...");return h.default.createElement("div",(0,r.default)({},m,{ref:this.handleRoot,className:C}),h.default.createElement("div",{ref:this.handleContent},I({tooltip:p,overlayStyle:g,title:a,children:x}),h.default.createElement("div",{className:b.default.shadow,ref:this.handleShadowChildren},i),h.default.createElement("div",{className:b.default.shadow,ref:this.handleShadow},h.default.createElement("span",null,a))))}}]),t}(h.Component);t.default=T}}]);