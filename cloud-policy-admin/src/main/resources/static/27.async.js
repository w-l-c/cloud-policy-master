(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[27],{mS5Y:function(e,a,t){"use strict";var n=t("g09b");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t("p0pE")),s=n(t("d6i3")),d=n(t("GIZZ")),o=t("78Ac"),u=t("wjNW"),c=t("UUvt"),i=(0,d.default)(o.tablePageModel,{namespace:"usermanage",effects:{fetch:s.default.mark(function e(a,t){var n,r,d,o,i;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload,r=t.call,d=t.put,e.next=4,r(u.queryPost,n,"/sys/user/list");case 4:if(o=e.sent,!o){e.next=11;break}return i=o.body,e.next=9,d({type:"save",payload:{data:i}});case 9:e.next=12;break;case 11:(0,c.showStautsMessageHandle)("error");case 12:case"end":return e.stop()}},e)}),update:s.default.mark(function e(a,t){var n,r,d,o,i,l,p,f,y;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload,r=t.call,d=t.put,o=t.select,e.next=4,d({type:"changgeConfirmLoading",payload:{confirmLoading:!0}});case 4:return e.next=6,o(function(e){return e.usermanage.data.pagination.current});case 6:return i=e.sent,Object.assign(n,{page:i}),e.next=10,r(u.update,n,"/sys/user/update");case 10:return l=e.sent,e.next=13,d({type:"changgeConfirmLoading",payload:{confirmLoading:!1}});case 13:if(!l){e.next=23;break}if(p=l.code,f=void 0===p?200:p,y=l.body,200!==f){e.next=20;break}return e.next=18,d({type:"modalVisible",payload:{modalVisible:!1}});case 18:return e.next=20,d({type:"save",payload:{data:y}});case 20:(0,c.showStautsMessageHandle)("usermanage","update",f),e.next=24;break;case 23:(0,c.showStautsMessageHandle)("error");case 24:case"end":return e.stop()}},e)}),add:s.default.mark(function e(a,t){var n,r,d,o,i,l,p;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload,r=t.call,d=t.put,e.next=4,d({type:"changgeConfirmLoading",payload:{confirmLoading:!0}});case 4:return e.next=6,r(u.create,n,"/sys/user/save");case 6:return o=e.sent,e.next=9,d({type:"changgeConfirmLoading",payload:{confirmLoading:!1}});case 9:if(!o){e.next=19;break}if(i=o.code,l=void 0===i?200:i,p=o.body,200!==l){e.next=16;break}return e.next=14,d({type:"modalVisible",payload:{modalVisible:!1}});case 14:return e.next=16,d({type:"save",payload:{data:p}});case 16:(0,c.showStautsMessageHandle)("usermanage","add",l),e.next=20;break;case 19:(0,c.showStautsMessageHandle)("error");case 20:case"end":return e.stop()}},e)}),remove:s.default.mark(function e(a,t){var n,r,d,o,i,l,p;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload,r=t.call,d=t.put,e.next=4,r(u.remove,n,"/sys/user/del");case 4:if(o=e.sent,!o){e.next=13;break}if(i=o.code,l=void 0===i?200:i,p=o.body,200!==l){e.next=10;break}return e.next=10,d({type:"save",payload:{data:p}});case 10:(0,c.showStautsMessageHandle)("usermanage","delete",l),e.next=14;break;case 13:(0,c.showStautsMessageHandle)("error");case 14:case"end":return e.stop()}},e)})},reducers:{save:function(e,a){var t=a.payload.data;return(0,r.default)({},e,{data:Object.assign(t,{list:t.list&&t.list.map(function(e){return(0,r.default)({},e,{roleids:e.sysRoleList&&e.sysRoleList.map(function(e){return e.id})})})})})}}});a.default=i}}]);